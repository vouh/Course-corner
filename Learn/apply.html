<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apply â€“ Digital Literacy Course | Course Corner Learn</title>
    <link rel="icon" href="/favicon.ico" sizes="any">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/modern-ui.css">
    <link rel="stylesheet" href="../assets/css/auth.css">
    <style>
        *{box-sizing:border-box;margin:0;padding:0}
        body{font-family:'Inter',sans-serif;background:#f9fafb;color:#1f2937}

        .page-hero{
            padding-top:80px;
            background:linear-gradient(135deg,#f0fdf4 0%,#ecfdf5 50%,#e0f2fe 100%);
            padding-bottom:3rem;
        }
        .page-hero-inner{max-width:720px;margin:0 auto;padding:3rem 2rem 1rem;text-align:center}
        .section-pill{display:inline-flex;align-items:center;gap:.5rem;background:rgba(22,163,74,.1);color:#15803d;padding:.35rem .875rem;border-radius:9999px;font-size:.8rem;font-weight:600;margin-bottom:1rem;letter-spacing:.03em;text-transform:uppercase}
        .page-title{font-size:clamp(1.75rem,3.5vw,2.75rem);font-weight:800;color:#111827;letter-spacing:-.025em;margin-bottom:.875rem;line-height:1.2}
        .page-desc{font-size:1.0625rem;color:#4b5563;line-height:1.7;max-width:520px;margin:0 auto}

        /* Form layout */
        .form-area{max-width:760px;margin:0 auto;padding:2.5rem 2rem 4rem}

        .form-card{background:white;border-radius:1.25rem;border:1px solid #e5e7eb;box-shadow:0 4px 20px rgba(0,0,0,.06);overflow:hidden}

        .form-section{padding:2rem 2.5rem;border-bottom:1px solid #f3f4f6}
        .form-section:last-child{border-bottom:none}
        .form-section-title{font-size:1rem;font-weight:700;color:#111827;margin-bottom:1.5rem;display:flex;align-items:center;gap:.5rem;padding-bottom:.875rem;border-bottom:2px solid #f0fdf4}
        .form-section-title i{color:#16a34a;font-size:.9rem}

        .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:1.25rem}
        .form-grid.single{grid-template-columns:1fr}
        @media(max-width:600px){.form-grid{grid-template-columns:1fr}}

        .form-group{display:flex;flex-direction:column;gap:.375rem}
        .form-label{font-size:.875rem;font-weight:600;color:#374151}
        .form-label .required{color:#ef4444;margin-left:.25rem}
        .form-input{
            padding:.75rem 1rem;border:1.5px solid #e5e7eb;border-radius:.75rem;
            font-size:.9375rem;transition:all .25s;background:#fafafa;font-family:'Inter',sans-serif;
        }
        .form-input:focus{outline:none;border-color:#16a34a;background:white;box-shadow:0 0 0 3px rgba(22,163,74,.12)}
        .form-input::placeholder{color:#9ca3af}
        textarea.form-input{resize:vertical;min-height:100px}
        select.form-input{cursor:pointer;appearance:none;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2316a34a' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right .75rem center;background-repeat:no-repeat;background-size:1.25em;padding-right:2.5rem}

        .hint-text{font-size:.78125rem;color:#9ca3af;margin-top:.25rem}

        /* Course summary card inside form */
        .course-summary{
            background:linear-gradient(135deg,#f0fdf4,#ecfdf5);
            border:1.5px solid #bbf7d0;border-radius:1rem;padding:1.5rem;
            display:flex;align-items:flex-start;gap:1.25rem;margin-bottom:1.5rem;
        }
        .course-icon{width:56px;height:56px;background:linear-gradient(135deg,#16a34a,#0ea5e9);border-radius:1rem;display:flex;align-items:center;justify-content:center;font-size:1.5rem;color:white;flex-shrink:0}
        .course-info h4{font-size:1rem;font-weight:700;color:#111827;margin-bottom:.25rem}
        .course-info p{font-size:.875rem;color:#4b5563;line-height:1.5;margin-bottom:.5rem}
        .course-tags{display:flex;flex-wrap:wrap;gap:.375rem}
        .ctag{font-size:.75rem;font-weight:600;padding:.2rem .5rem;border-radius:9999px;background:white;border:1px solid #d1fae5;color:#15803d}

        /* Payment section */
        .payment-option{
            border:2px solid #e5e7eb;border-radius:.875rem;padding:1.25rem 1.5rem;
            cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:1rem;
            margin-bottom:.75rem;
        }
        .payment-option:hover{border-color:#16a34a;background:#f0fdf4}
        .payment-option.selected{border-color:#16a34a;background:#f0fdf4}
        .payment-option input[type="radio"]{accent-color:#16a34a;width:18px;height:18px;flex-shrink:0}
        .payment-option-info{flex:1}
        .payment-option-title{font-weight:700;color:#111827;font-size:.9375rem}
        .payment-option-desc{font-size:.8125rem;color:#6b7280;margin-top:.2rem}

        .fee-breakdown{background:#fafafa;border:1px solid #e5e7eb;border-radius:.875rem;padding:1.25rem;margin-top:1rem}
        .fee-row{display:flex;justify-content:space-between;padding:.5rem 0;font-size:.9rem;border-bottom:1px solid #f3f4f6}
        .fee-row:last-child{border-bottom:none;font-weight:700;font-size:1rem;color:#111827;margin-top:.25rem}

        /* Submit button */
        .btn-submit{
            width:100%;padding:1.125rem;background:linear-gradient(135deg,#16a34a,#15803d);
            color:white;border:none;border-radius:.875rem;font-size:1.0625rem;font-weight:700;
            cursor:pointer;transition:all .3s;display:flex;align-items:center;justify-content:center;gap:.625rem;
            box-shadow:0 8px 24px rgba(22,163,74,.3);font-family:'Inter',sans-serif;
        }
        .btn-submit:hover{transform:translateY(-2px);box-shadow:0 12px 32px rgba(22,163,74,.4)}
        .btn-submit:disabled{background:#9ca3af;cursor:not-allowed;transform:none;box-shadow:none}

        .terms-note{font-size:.8125rem;color:#9ca3af;text-align:center;margin-top:1rem;line-height:1.5}
        .terms-note a{color:#16a34a;text-decoration:none}

        /* Side info card */
        .sticky-sidebar{position:sticky;top:100px}
        .info-card{background:white;border:1px solid #e5e7eb;border-radius:1.25rem;padding:1.75rem;box-shadow:0 4px 15px rgba(0,0,0,.06);margin-bottom:1.5rem}

        .steps-list{list-style:none;counter-reset:step-counter;display:flex;flex-direction:column;gap:1rem}
        .steps-list li{display:flex;align-items:flex-start;gap:.875rem;font-size:.9rem;color:#4b5563;line-height:1.5;counter-increment:step-counter}
        .step-num{width:28px;height:28px;border-radius:50%;background:linear-gradient(135deg,#16a34a,#15803d);color:white;font-size:.75rem;font-weight:700;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-top:.1rem}

        @media(min-width:900px){
            .form-area{display:grid;grid-template-columns:1fr 320px;gap:2rem;max-width:1100px;}
            .form-main{order:1}
            .form-sidebar{order:2}
        }

        .learn-footer{background:#111827;color:#d1d5db;padding:2.5rem 2rem 1.5rem}
        .footer-inner{max-width:1240px;margin:0 auto}
        .footer-bottom{text-align:center;font-size:.875rem;color:#6b7280;margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid rgba(255,255,255,.08)}
    </style>
</head>
<body>

<!-- NAV -->
<header class="modern-header" id="applyHeader">
    <div class="header-container">
        <a href="index.html" class="logo-container">
            <img src="../assets/images/logo.png" alt="Course Corner Logo">
            <span class="logo-text" style="display:flex;flex-direction:column;line-height:1.15;">
                <span style="font-size:1rem;font-weight:700;color:var(--cc-primary);">Course Corner</span>
                <span style="font-size:0.7rem;font-weight:600;color:var(--cc-primary);letter-spacing:0.04em;text-transform:uppercase;">Learn Portal</span>
            </span>
        </a>
        <nav class="desktop-nav">
            <div class="nav-links">
                <a href="index.html#courses" class="modern-nav-link">Courses</a>
                <a href="course-detail.html"  class="modern-nav-link">Course Details</a>
                <a href="about.html"          class="modern-nav-link">About</a>
                <a href="dashboard.html"      class="modern-nav-link">My Dashboard</a>
            </div>
            <div class="nav-auth-buttons">
                <button id="signInNavBtn" class="btn-nav-profile" onclick="openSignInModal()"><i class="fas fa-user"></i> Sign In</button>
                <button id="signUpNavBtn" class="btn-nav-login"   onclick="openSignUpModal()"><i class="fas fa-rocket"></i> Get Started</button>
                <div id="userNavArea" style="display:none;align-items:center;gap:.75rem;">
                    <div id="userInitial" style="width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#16a34a,#0ea5e9);display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:.9rem;">?</div>
                    <button class="btn-nav-profile" onclick="handleSignOut()"><i class="fas fa-sign-out-alt"></i> Sign Out</button>
                </div>
            </div>
        </nav>
    </div>
</header>

<!-- PAGE HERO -->
<div class="page-hero">
    <div class="page-hero-inner">
        <div class="section-pill"><i class="fas fa-paper-plane"></i> Enrollment Application</div>
        <h1 class="page-title">Apply for<br>Digital Literacy &amp; Computer Skills</h1>
        <p class="page-desc">Complete the form below to secure your spot in the next cohort. We'll confirm your enrollment and send payment instructions within 24 hours.</p>
    </div>
</div>

<!-- FORM AREA -->
<div class="form-area">
    <!-- Main form -->
    <div class="form-main">
        <form id="applicationForm" class="form-card" onsubmit="handleSubmit(event)">

            <!-- Course summary -->
            <div class="form-section">
                <div class="form-section-title"><i class="fas fa-book-open"></i> Applying For</div>
                <div class="course-summary">
                    <div class="course-icon"><i class="fas fa-laptop-code"></i></div>
                    <div class="course-info">
                        <h4>Digital Literacy &amp; Computer Skills for Students</h4>
                        <p>6 Weeks Â· 10 Modules Â· Certificate Included Â· 100% Online</p>
                        <div class="course-tags">
                            <span class="ctag">Microsoft Office</span>
                            <span class="ctag">Canva Design</span>
                            <span class="ctag">AI Tools</span>
                            <span class="ctag">Career Readiness</span>
                            <span class="ctag">Monetization</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Personal Details -->
            <div class="form-section">
                <div class="form-section-title"><i class="fas fa-user"></i> Personal Information</div>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">First Name <span class="required">*</span></label>
                        <input id="firstName" type="text" class="form-input" placeholder="Jane" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Last Name <span class="required">*</span></label>
                        <input id="lastName" type="text" class="form-input" placeholder="Doe" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email Address <span class="required">*</span></label>
                        <input id="appEmail" type="email" class="form-input" placeholder="jane@example.com" required>
                        <span class="hint-text">Used to send confirmation & access portal</span>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone Number <span class="required">*</span></label>
                        <input id="phone" type="tel" class="form-input" placeholder="07XX XXX XXX" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Date of Birth</label>
                        <input id="dob" type="date" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Gender</label>
                        <select id="gender" class="form-input">
                            <option value="">Select gender</option>
                            <option>Female</option>
                            <option>Male</option>
                            <option>Prefer not to say</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Education & Background -->
            <div class="form-section">
                <div class="form-section-title"><i class="fas fa-graduation-cap"></i> Education &amp; Background</div>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Current Education Level <span class="required">*</span></label>
                        <select id="eduLevel" class="form-input" required>
                            <option value="">Select level</option>
                            <option>High School (Form 3/4)</option>
                            <option>KCSE Completed</option>
                            <option>College / TVET Student</option>
                            <option>University Student</option>
                            <option>Graduate</option>
                            <option>Working Professional</option>
                            <option>Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">School / Institution</label>
                        <input id="school" type="text" class="form-input" placeholder="School or college name">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Computer Experience Level <span class="required">*</span></label>
                        <select id="compLevel" class="form-input" required>
                            <option value="">Select level</option>
                            <option>Complete beginner â€” never used a computer</option>
                            <option>Basic â€” can browse internet and type</option>
                            <option>Intermediate â€” familiar with office apps</option>
                            <option>Advanced â€” comfortable with most software</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Device You'll Use for Learning</label>
                        <select id="device" class="form-input">
                            <option value="">Select device</option>
                            <option>Own laptop</option>
                            <option>Shared home computer</option>
                            <option>Phone only</option>
                            <option>Will access from cyber cafÃ© / school lab</option>
                            <option>Other</option>
                        </select>
                    </div>
                </div>
                <div class="form-grid single" style="margin-top:1.25rem;">
                    <div class="form-group">
                        <label class="form-label">Why do you want to take this course?</label>
                        <textarea id="motivation" class="form-input" placeholder="Tell us what you hope to achieve..." rows="4"></textarea>
                    </div>
                </div>
            </div>

            <!-- Payment -->
            <div class="form-section">
                <div class="form-section-title"><i class="fas fa-credit-card"></i> Payment Plan</div>
                <div class="payment-option selected" onclick="selectPayment(this,'full')">
                    <input type="radio" name="paymentPlan" value="full" checked>
                    <div class="payment-option-info">
                        <div class="payment-option-title">Full Payment â€” KES 3,500</div>
                        <div class="payment-option-desc">Pay once and get full immediate access. Best value.</div>
                    </div>
                    <div style="font-size:1.125rem;font-weight:800;color:#16a34a;">KES 3,500</div>
                </div>
                <div class="payment-option" onclick="selectPayment(this,'installment')">
                    <input type="radio" name="paymentPlan" value="installment">
                    <div class="payment-option-info">
                        <div class="payment-option-title">Installment Plan â€” 2 Payments</div>
                        <div class="payment-option-desc">KES 2,000 now + KES 1,500 by Week 3. Access starts after first payment.</div>
                    </div>
                    <div style="font-size:1.125rem;font-weight:800;color:#0ea5e9;">2Ã— KES</div>
                </div>
                <div class="fee-breakdown">
                    <div class="fee-row"><span>Course fee</span><span>KES 3,500</span></div>
                    <div class="fee-row"><span>Registration</span><span>Free</span></div>
                    <div class="fee-row"><span>Certificate fee</span><span>Included</span></div>
                    <div class="fee-row"><span style="color:#16a34a;font-weight:700;">Total due today (full plan)</span><span style="color:#16a34a;">KES 3,500</span></div>
                </div>
                <p style="font-size:.8125rem;color:#6b7280;margin-top:.875rem;background:#fffbeb;padding:.75rem 1rem;border-radius:.625rem;border-left:3px solid #f59e0b;">
                    <i class="fas fa-info-circle" style="color:#f59e0b;"></i> Payment instructions (M-Pesa) will be sent to your email after application review. Your spot is reserved for 48 hours.
                </p>
            </div>

            <!-- Emergency / Additional -->
            <div class="form-section">
                <div class="form-section-title"><i class="fas fa-user-shield"></i> Additional Information</div>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">How did you hear about us?</label>
                        <select id="referral" class="form-input">
                            <option value="">Select source</option>
                            <option>Course Corner website</option>
                            <option>WhatsApp</option>
                            <option>Social Media (Facebook/Instagram)</option>
                            <option>Friend / Family</option>
                            <option>School Notice Board</option>
                            <option>Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Preferred Start Time</label>
                        <select id="startTime" class="form-input">
                            <option value="">Select preference</option>
                            <option>Morning (8am â€“ 12pm)</option>
                            <option>Afternoon (12pm â€“ 5pm)</option>
                            <option>Evening (5pm â€“ 9pm)</option>
                            <option>Weekends only</option>
                            <option>Flexible / Any time</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Terms + Submit -->
            <div class="form-section">
                <div style="display:flex;align-items:flex-start;gap:.75rem;margin-bottom:1.5rem;">
                    <input id="agreeTerms" type="checkbox" style="margin-top:.2rem;width:18px;height:18px;accent-color:#16a34a;flex-shrink:0;" required>
                    <label for="agreeTerms" style="font-size:.9rem;color:#4b5563;line-height:1.6;cursor:pointer;">
                        I agree to the <a href="/pages/terms-of-service.html" target="_blank" style="color:#16a34a;font-weight:600;">Terms of Service</a> and <a href="/pages/privacy-policy.html" target="_blank" style="color:#16a34a;font-weight:600;">Privacy Policy</a>. I understand that my data will be stored securely in Course Corner's systems.
                    </label>
                </div>
                <button type="submit" class="btn-submit" id="submitBtn">
                    <i class="fas fa-paper-plane"></i> Submit Application
                </button>
                <p class="terms-note">ðŸ”’ Your information is secure and will never be shared with third parties.</p>
            </div>
        </form>
    </div>

    <!-- Sidebar -->
    <div class="form-sidebar">
        <div class="sticky-sidebar">
            <div class="info-card">
                <h3 style="font-size:1rem;font-weight:700;color:#111827;margin-bottom:1.25rem;display:flex;align-items:center;gap:.5rem;"><i class="fas fa-list-check" style="color:#16a34a;"></i> Application Steps</h3>
                <ol class="steps-list">
                    <li><div class="step-num">1</div><span><strong>Fill the form</strong> â€” takes about 5 minutes</span></li>
                    <li><div class="step-num">2</div><span><strong>Review email</strong> â€” we confirm within 24 hours</span></li>
                    <li><div class="step-num">3</div><span><strong>Make payment</strong> via M-Pesa instructions provided</span></li>
                    <li><div class="step-num">4</div><span><strong>Get access</strong> â€” dashboard activated immediately after payment</span></li>
                    <li><div class="step-num">5</div><span><strong>Start learning!</strong> â€” your 6-week journey begins</span></li>
                </ol>
            </div>

            <div class="info-card" style="background:linear-gradient(135deg,#f0fdf4,#ecfdf5);border-color:#bbf7d0;">
                <h3 style="font-size:1rem;font-weight:700;color:#15803d;margin-bottom:1.25rem;display:flex;align-items:center;gap:.5rem;"><i class="fas fa-calendar-check"></i> Next Cohort</h3>
                <div style="font-size:1.5rem;font-weight:800;color:#111827;margin-bottom:.25rem;">March 2026</div>
                <div style="font-size:.875rem;color:#6b7280;margin-bottom:1rem;">Limited spots available</div>
                <div style="background:white;border:1px solid #d1fae5;border-radius:.75rem;padding:1rem;font-size:.875rem;color:#4b5563;line-height:1.6;">
                    <strong style="color:#111827;">Duration:</strong> 6 Weeks<br>
                    <strong style="color:#111827;">Format:</strong> 100% Online<br>
                    <strong style="color:#111827;">Fee:</strong> KES 3,500<br>
                    <strong style="color:#111827;">Certificate:</strong> Yes â€” on completion
                </div>
            </div>

            <div class="info-card">
                <h3 style="font-size:1rem;font-weight:700;color:#111827;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem;"><i class="fas fa-question-circle" style="color:#0ea5e9;"></i> Questions?</h3>
                <p style="font-size:.875rem;color:#6b7280;line-height:1.6;margin-bottom:1rem;">Reach us on WhatsApp or email and we'll get back to you in under an hour.</p>
                <a href="/pages/contact.html" style="display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem;background:#0ea5e9;color:white;border-radius:.75rem;font-weight:600;font-size:.875rem;text-decoration:none;transition:background .2s;" onmouseover="this.style.background='#0284c7'" onmouseout="this.style.background='#0ea5e9'">
                    <i class="fas fa-envelope"></i> Contact Support
                </a>
            </div>
        </div>
    </div>
</div>

<!-- FOOTER -->
<footer class="learn-footer">
    <div class="footer-inner">
        <div class="footer-bottom"><p>&copy; 2026 Course Corner Learn. All rights reserved.</p></div>
    </div>
</footer>

<!-- Sign In Modal -->
<div id="signInModal" class="auth-modal-overlay" style="display:none;">
    <div class="auth-modal">
        <div class="modal-header">
            <div style="display:flex;align-items:center;gap:.75rem;"><img src="../assets/images/logo.png" style="width:32px;height:32px;object-fit:contain;" alt=""><h2>Sign In</h2></div>
            <button class="modal-close-btn" onclick="closeSignInModal()"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
            <form id="signInForm" class="auth-form" onsubmit="handleSignIn(event)">
                <div class="form-group"><label class="form-label">Email</label><input id="siEmail" type="email" class="form-input" placeholder="you@example.com" required></div>
                <div class="form-group"><label class="form-label">Password</label><input id="siPassword" type="password" class="form-input" placeholder="Your password" required></div>
                <button type="submit" class="btn-primary"><i class="fas fa-sign-in-alt"></i> Sign In</button>
            </form>
            <p style="text-align:center;margin-top:1rem;font-size:.875rem;color:#6b7280;">No account? <button style="background:none;border:none;color:#16a34a;font-weight:600;cursor:pointer;" onclick="switchToSignUp()">Create one</button></p>
        </div>
    </div>
</div>
<div id="signUpModal" class="auth-modal-overlay" style="display:none;">
    <div class="auth-modal">
        <div class="modal-header">
            <div style="display:flex;align-items:center;gap:.75rem;"><img src="../assets/images/logo.png" style="width:32px;height:32px;object-fit:contain;" alt=""><h2>Create Account</h2></div>
            <button class="modal-close-btn" onclick="closeSignUpModal()"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
            <form id="signUpForm" class="auth-form" onsubmit="handleSignUp(event)">
                <div class="form-group"><label class="form-label">Full Name</label><input id="suName" type="text" class="form-input" placeholder="Jane Doe" required></div>
                <div class="form-group"><label class="form-label">Email</label><input id="suEmail" type="email" class="form-input" placeholder="you@example.com" required></div>
                <div class="form-group"><label class="form-label">Password</label><input id="suPassword" type="password" class="form-input" placeholder="Min 6 chars" required minlength="6"></div>
                <div class="form-group"><label class="form-label">Confirm Password</label><input id="suConfirm" type="password" class="form-input" placeholder="Repeat password" required></div>
                <button type="submit" class="btn-primary"><i class="fas fa-user-plus"></i> Create Account</button>
            </form>
            <p style="text-align:center;margin-top:1rem;font-size:.875rem;color:#6b7280;">Already have an account? <button style="background:none;border:none;color:#16a34a;font-weight:600;cursor:pointer;" onclick="switchToSignIn()">Sign In</button></p>
        </div>
    </div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
    import { getAuth, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, updateProfile } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";
    import { getFirestore, doc, setDoc, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

    const app  = initializeApp({apiKey:"AIzaSyCt_mM9mwRg0QJpHC4haH7ZsLspVNJI6XM",authDomain:"course-corner.firebaseapp.com",projectId:"course-corner",storageBucket:"course-corner.firebasestorage.app",messagingSenderId:"961706784572",appId:"1:961706784572:web:7aa6c24946570ffda59039"});
    const auth = getAuth(app); const db = getFirestore(app);

    onAuthStateChanged(auth,user=>{
        const si=document.getElementById('signInNavBtn'),su=document.getElementById('signUpNavBtn'),area=document.getElementById('userNavArea'),init=document.getElementById('userInitial');
        if(user){
            if(si)si.style.display='none';if(su)su.style.display='none';if(area)area.style.display='flex';
            if(init)init.textContent=(user.displayName||user.email||'?')[0].toUpperCase();
            // Pre-fill email
            const emailField=document.getElementById('appEmail');
            if(emailField&&!emailField.value) emailField.value=user.email||'';
        } else {
            if(si)si.style.display='';if(su)su.style.display='';if(area)area.style.display='none';
        }
    });

    window.openSignInModal=()=>document.getElementById('signInModal').style.display='flex';
    window.closeSignInModal=()=>document.getElementById('signInModal').style.display='none';
    window.openSignUpModal=()=>document.getElementById('signUpModal').style.display='flex';
    window.closeSignUpModal=()=>document.getElementById('signUpModal').style.display='none';
    window.switchToSignUp=()=>{closeSignInModal();openSignUpModal();};
    window.switchToSignIn=()=>{closeSignUpModal();openSignInModal();};
    window.handleSignIn=async e=>{e.preventDefault();try{await signInWithEmailAndPassword(auth,document.getElementById('siEmail').value,document.getElementById('siPassword').value);closeSignInModal();Swal.fire({icon:'success',title:'Welcome back!',timer:2000,showConfirmButton:false});}catch(err){Swal.fire({icon:'error',title:'Error',text:err.message,confirmButtonColor:'#16a34a'});}};
    window.handleSignUp=async e=>{e.preventDefault();const name=document.getElementById('suName').value,email=document.getElementById('suEmail').value,pw=document.getElementById('suPassword').value,pw2=document.getElementById('suConfirm').value;if(pw!==pw2){Swal.fire({icon:'warning',title:'Passwords do not match',confirmButtonColor:'#16a34a'});return;}try{const{user}=await createUserWithEmailAndPassword(auth,email,pw);await updateProfile(user,{displayName:name});await setDoc(doc(db,'learn_users',user.uid),{uid:user.uid,name,email,createdAt:serverTimestamp()},{merge:true});closeSignUpModal();Swal.fire({icon:'success',title:'Account Created!',text:`Welcome, ${name}!`,confirmButtonColor:'#16a34a'});}catch(err){Swal.fire({icon:'error',title:'Error',text:err.message,confirmButtonColor:'#16a34a'});}};
    window.handleSignOut=async()=>{await signOut(auth);Swal.fire({icon:'info',title:'Signed out',timer:1500,showConfirmButton:false});};
    ['signInModal','signUpModal'].forEach(id=>{document.getElementById(id).addEventListener('click',e=>{if(e.target.id===id)e.target.style.display='none';});});

    // Application submit
    window.handleSubmit = async (e) => {
        e.preventDefault();
        const btn = document.getElementById('submitBtn');
        btn.disabled = true;
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting...';

        const payPlan = document.querySelector('input[name="paymentPlan"]:checked')?.value || 'full';

        const application = {
            firstName:  document.getElementById('firstName').value.trim(),
            lastName:   document.getElementById('lastName').value.trim(),
            email:      document.getElementById('appEmail').value.trim(),
            phone:      document.getElementById('phone').value.trim(),
            dob:        document.getElementById('dob').value,
            gender:     document.getElementById('gender').value,
            eduLevel:   document.getElementById('eduLevel').value,
            school:     document.getElementById('school').value.trim(),
            compLevel:  document.getElementById('compLevel').value,
            device:     document.getElementById('device').value,
            motivation: document.getElementById('motivation').value.trim(),
            paymentPlan:payPlan,
            referral:   document.getElementById('referral').value,
            startTime:  document.getElementById('startTime').value,
            course:     'digital-literacy-6weeks',
            status:     'pending',
            submittedAt:serverTimestamp(),
            userId:     auth.currentUser?.uid || null,
        };

        try {
            await addDoc(collection(db, 'learn_applications'), application);
            Swal.fire({
                icon:'success',
                title:'Application Submitted! ðŸŽ‰',
                html:`<p>Thank you, <strong>${application.firstName}</strong>!</p>
                      <p style="margin-top:.5rem;color:#4b5563;">We've received your application and will send payment instructions to <strong>${application.email}</strong> within 24 hours.</p>
                      <p style="margin-top:.5rem;color:#4b5563;">Your spot is reserved for 48 hours. Check your email inbox (and spam folder).</p>`,
                confirmButtonColor:'#16a34a',
                confirmButtonText:'View My Dashboard'
            }).then(() => window.location.href = 'dashboard.html');
        } catch(err) {
            Swal.fire({icon:'error',title:'Submission Failed',text:'Something went wrong. Please try again or contact support.',confirmButtonColor:'#16a34a'});
            btn.disabled = false;
            btn.innerHTML = '<i class="fas fa-paper-plane"></i> Submit Application';
        }
    };
</script>
<script>
    window.addEventListener('scroll',()=>document.getElementById('applyHeader').classList.toggle('scrolled',scrollY>10));
    function selectPayment(el,val){
        document.querySelectorAll('.payment-option').forEach(o=>o.classList.remove('selected'));
        el.classList.add('selected');
        el.querySelector('input[type="radio"]').checked=true;
    }
</script>
</body>
</html>
